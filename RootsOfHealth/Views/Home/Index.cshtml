
@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .required-asterisk {
        color: #c10000;
    }
    slide-placeholder {
        background: #DADADA;
        position: relative;
    }


    #control-box li:first-child {
        border-radius: 5px 5px 0 0;
        margin-top: 0;
    }

    #control-box li {
        cursor: move;
        list-style: none;
        margin: 0 0 -1px 0;
        padding: 10px;
        text-align: left;
        background: #fff;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        box-shadow: inset 0 0 0 1px #c5c5c5;
    }

    span i {
        margin-right: 10px;
        font-size: 16px;
    }

    .dragresize {
        /*border: 1px dashed #ccc;
        padding: 10px;
        margin: 0 9px;*/
        box-sizing: border-box;
    }
    .frmbtn {
       border: 1px dashed #ccc;
        padding: 10px;
        position:relative;
        margin: 0 0 30px 0;
    }

    #droppable {
        list-style-type:none;
        background: #ffffff;
        min-height: 490px;
        border: 3px dashed #ccc;
        width: 100%;
        display: flex;
        align-items: flex-start;
        flex-wrap: wrap;
        padding: 10px 0;
        align-content: baseline;
    }

    .dragresize .ui-resizable-handle {
        opacity: 0;
    }

    .draggablediv .dragresize  {
        position: relative;
    }

    .event-btn-right {
        position: absolute;
        bottom: -13px;
        right: 5px;
        z-index: 9;
    }

    button.event-btn {
        font-size: 12px;
        margin: 0 0 0 5px;
        border-radius: 3px;
        border: 0;
        padding: 5px 7px;
        line-height: normal;
        transition: all .30s ease-out;
        cursor: pointer;
        display: none;
    }

    .draggablediv .dragresize:hover button.event-btn {
        display: inline
    }

    button.event-btn.file-edit {
        background: #2ecc71;
        color: #fff;
    }

    .file-remove {
        background: #e74c3c;
        color: #fff;
    }

    .popup-event-btn button.event-btn {
        display: inline-block;
        width: 38px;
        height: 38px;
        font-size: 14px;
    }

    .option-block {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px;
    }

    .option-fields {
        display: flex;
        flex: 0 0 81%;
        max-width: 81%;
    }

        .option-fields input:last-child {
            margin-left: 15px;
        }

    .modal-row {
        margin: 0 0 10px 0;
        display: block;
    }


    .highlight {
        background-color: #34425a;
        -moz-box-shadow: inset 0 0 10px #34425a;
        -webkit-box-shadow: inset 0 0 10px #34425a;
        box-shadow: inset 0 0 10px #34425a;
       height:90px;
    }

    .form-group.set-align label {
        padding-right: 10px;
        margin-bottom: 0px;
    }
    .form-group.set-align {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
}
    .highlight {
        background-color: #34425a;
        -moz-box-shadow: inset 0 0 10px #34425a;
        -webkit-box-shadow: inset 0 0 10px #34425a;
        box-shadow: inset 0 0 10px #34425a;
       height:90px;
       border: 1px dashed #aaa;
       line-height: 1.2em;
    }
/*13-04-2020*/
    ul#control-box {
        padding: 0;
    }
    .controlsTabWrap {
        background: #34425a;
    }
    .controlsTabWrap .nav-tabs .nav-link.active {
        background: transparent;
        color: #fff;
        border: 0;
    }
    .controlsTabWrap .nav-tabs .nav-link {
    }
    .controlsTabWrap .nav-tabs {
        margin: 0 0 0px;
    }
    .controlsTabWrap .tab-content {
        padding: 20px;
    }
    .controlsTabWrap .tab-content .tab-pane {
        padding: 0;
    }
    .controlsTabWrap #control-box li {
        background: transparent;
        color: #fff;
        border-radius: 0;
        box-shadow: none;
        border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    .controlsTabWrap ul#control-box {
        border: 0;
    }
    #content .controlsTabWrap.profile-tabs .nav-tabs {
        position: static;
        margin: 0;
        width: 100%;
        height:auto;
        background:#fff;
        padding-top:0px;
    }
    #frmb-cb-wrap .profile-tabs .nav-tabs:hover {
        overflow-x:hidden;
    }
    .databseSelectControl label {
        color: #fff;
    }
    .databseSelectControl select {
        background: #3e4e6a;
        color: #fff;
        border: 1px solid rgba(255,255,255,0.2);
    }
    div#droppable .form-control {
        height: 23px;
        font-size: 13px;
        border: 1px solid #e2e2e2;
        border-radius:0px;
        padding:0 15px;
    }
        div#droppable .form-control[type="file"] {
            border: 0;
            padding: 0;
            height: auto;
        }
    div#droppable textarea.form-control {
        height: 50px;
    }
    div#droppable .form-control:focus {
        box-shadow: none;
        outline: none;
    }
    div#droppable .event-btn-right {
        position: absolute;
        bottom: auto;
        right: -1px;
        z-index: 9;
        top: -3px;
    }
    .draggablediv .frmbtn .form-group label:first-child {
        background: #e2e2e2;
        display: block;
        margin: -11px -11px 10px;
        padding: 4px 10px;
        font-size: 14px;
        color: #343434;
        font-weight: 500;
        line-height: normal;
        vertical-align: middle;
    }

    .draggablediv .frmbtn .form-group {
        margin: 0;
    }
    .draggablediv .frmbtn {
        border: 1px solid #e2e2e2;
        padding: 10px;
        position: relative;
        margin: 0 0 20px 0;
    }
        .draggablediv .frmbtn select.form-control {
            padding: 0 15px;
            background: url(../images/chevron-arrow-down.svg) no-repeat 0 0;
            -webkit-appearance: none;
            -moz-appearance: none;
            -ms-appearance: none;
            background-size: 12px;
            background-position: 98% 5px;
        }
    #content .profile-tabs.controlsTabWrap {
        position: sticky;
        top: 0;
    }
    .appointment {
        position: relative;
    }
        
</style>

<section id="content" class="responsive-container pt-0">

    <div class="inner-content mt-0">

        <div class="container-fluid pl-0 pr-0">

            <div class="appointment scroll">
                <div class="detail-heading d-flex">
                    <h2>Care Plan</h2><div class="detail-button ml-auto">
                   <a  href="javascript:{}" onclick="return saveHtml();" id="ProfileSave" class="btn btn-success mr-0">
                            <i class="far fa-save"></i>
                            Save
                        </a>
                    </div>
                </div>
                
                
                <div class="row">
                    
                    <div id="frmb-cb-wrap" class="col-md-3">
                        <div class="controlsTabWrap profile-tabs">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#htmlTab">HTML Field</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#databaseTab">Database Field</a>
                                </li>
                            </ul>

                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane active container" id="htmlTab">
                                    <ul id="control-box" class="frmb-control">
                                        <li data-type="label"><span><i class="fa fa-tasks" aria-hidden="true"></i>Label</span></li>
                                        <li id="btn" data-type="button"><span><i class="fa fa-tasks" aria-hidden="true"></i>Button</span></li>
                                        <li data-type="checkbox-group"><span><i class="fa fa-check-square" aria-hidden="true"></i>Checkbox</span></li>
                                        <li data-type="date"><span><i class="fa fa-calendar" aria-hidden="true"></i>Date Field</span></li>
                                        <li data-type="file"><span><i class="fa fa-file" aria-hidden="true"></i>File Upload</span></li>
                                        <li data-type="number"><span><i class="fa fa-list-ol" aria-hidden="true"></i>Number</span></li>
                                        <li data-type="radio-group"><span><i class="fa fa-stop-circle" aria-hidden="true"></i>Radio</span></li>
                                        <li data-type="select"><span><i class="fa fa-text-width" aria-hidden="true"></i>Select</span></li>
                                        <li data-type="text"><span><i class="fa fa-text-width" aria-hidden="true"></i>Text Field</span></li>
                                        <li data-type="textarea"><span><i class="fa fa-text-width" aria-hidden="true"></i>Text Area</span></li>
                                    </ul>
                                </div>
                                <div class="tab-pane container" id="databaseTab">
                                    <div class="form-group databseSelectControl">
                                        <label>Select</label>
                                        <select id="ddlform" class="form-control" onchange="getFormFields()">
                                            <option value="0">Select Option</option>
                                            <option value="1">Client profile</option>
                                            <option value="2">Client Housing</option>
                                            <option value="3">Client Financial Security</option>
                                            <option value="4">Client Employment/Education</option>
                                            <option value="5">Client Communication & Mobility</option>
                                            <option value="6">Client Healthcare</option>
                                            <option value="7">Client Social Supports and Safety</option>
                                            <option value="8">Client Legal Status</option>
                                            <option value="9">DAST</option>
                                            <option value="10">AUDIT</option>
                                            <option value="11">Client Health Questionnaire (PHQ-9)</option>
                                            <option value="12">Client Food Access</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="row">

                            <div id="droppable" class="draggablediv">

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Edit Html</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="modal-row">
                    <label>Label</label>
                    <input type="text" class="form-control" />
                </div>

                <div class="modal-row">
                    <label>Options</label>
                    <div class="option-block">
                        <div class="option-fields">
                            <input type="text" placeholder="Key" class="form-control" />
                            <input type="text" placeholder="Value" class="form-control" />
                        </div>

                        <div class="popup-event-btn">
                            <button class="event-btn file-edit"><i class="fas fa-plus"></i></button>
                            <button class="event-btn file-remove"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        </div>

                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btnSave">Save changes</button>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script src="~/Scripts/jquery-ui.min.js"></script>
    <script>
        var new_id = 0;
        $(function () {
           
               $('#control-box li').draggable({
                connectToSortable: '#droppable',
                   helper: function () {
                       //$("#droppable").sortable('enable');
        var cloned = $(this).clone();
        cloned.attr('id', (++new_id).toString());
        return cloned;
                   },                 
            });
            $("#droppable").sortable({
                connectWith: "#control-box",
                containment: "#droppable",
                placeholder: "highlight",
                start: function (e, ui) {
                    placeholderHeight = ui.item.outerHeight();
                    placeholderWidth = ui.item.outerWidth();
                    ui.placeholder.height(placeholderHeight + 10);
                    ui.placeholder.width(placeholderWidth + 10);    
                },
                receive: function (event, ui) {
                  var draggableId = ui.item.attr("data-type");
                  var newid = draggableId + $(ui.helper).clone().attr('id');
                    switch (draggableId) {
                        case "label":
                             var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group"><label id="' + newid + '" class="editable">Label</label></div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                            $(this).find("li").replaceWith(str);
                            break;
                        case "button":
                            var str = '<div class="dragresize col-md-12"><div class="frmbtn"><button id="' + newid + '"  type="submit" class="btn btn-primary">Button</button>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div> ';
                            $(this).find("li").replaceWith(str);
                            break;
                        case "checkbox-group":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group" id="' + newid + '">' +
                                '<label class="checkbox-group">Check Box (Multiple)</label>' +
                                '<div class="custom-control custom-checkbox  d-inline-block mr-2">' +
                                '<input  type="checkbox" class="custom-control-input" name="checkbox" value="true" id="checkbox1">' +
                                '<label class="custom-control-label" for="checkbox1" value="true">Yes</label></div>' +
                                '<div class="custom-control custom-checkbox  d-inline-block mr-2">' +
                                '<input type="checkbox" class="custom-control-input"  name="checkbox" value="false" id="checkbox2">' +
                                '<label class="custom-control-label" for="checkbox2">No</label></div>' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                           $(this).find("li").replaceWith(str);
                            break;
                        case "date":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group">' +
                                '<label>Label</label><span class="required-asterisk" style="display: none;"> *</span>' +
                                '<input id="' + newid + '"  type="date" class="form-control" id="">' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div> ';
                            $(this).find("li").replaceWith(str);
                            break;
                        case "file":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group">' +
                                '<label >Label</label >' +
                                '<input id="' + newid + '"  type="file" class="form-control" id="">' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';

                            $(this).find("li").replaceWith(str);
                            break;
                        case "number":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group">' +
                                '<label>Label</label> <span class="required-asterisk" style="display: none;"> *</span>' +
                                '<input id="' + newid + '"  type="number" class="form-control" id="">' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                            $(this).find("li").replaceWith(str);
                            break;
                        case "radio-group":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group"  id="' + newid + '">' +
                                '<label class="radiobox-group">Radio</label>'+
                                '<div class="custom-control custom-radio d-inline-block mr-2">' +
                                '<input  type="radio" class="custom-control-input" name="radio" value="true" id="radio1">' +
                                '<label class="custom-control-label" for="radio1" value="true">Yes</label></div>' +
                                '<div class="custom-control custom-radio d-inline-block mr-2">' +
                                '<input type="radio" class="custom-control-input"  name="radio" value="false" id="radio2">' +                                
                                '<label class="custom-control-label" for="radio2">No</label></div>'+
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                            $(this).find("li").replaceWith(str);
                            break;
                        case "select":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group">' +
                                '<label>Select</label><span class="required-asterisk" style="display: none;"> *</span>' +
                                ' <select id="' + newid + '" class="form-control">' +
                                ' <option value="0">Select Option</option>' +
                                '<option  value="1">1</option>' +
                                '<option  value="2">2</option>' +
                                '<option  value="3">3</option>' +
                                ' </select>' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                            $(this).find("li").replaceWith(str);
                            break;
                        case "text":
                           var str = '<div class="dragresize col-md-12"><div class="frmbtn"><div class="form-group">' +
                                '<label>Label</label><span class="required-asterisk" style="display: none;"> *</span>' +
                               '<input id="' + newid + '"  type="text" class="form-control">' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button  class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                           $(this).find("li").replaceWith(str);
                            break;
                        case "textarea":
                            var str = '<div  class="dragresize col-md-12"><div class="frmbtn"><div class="form-group">' +
                                '<label>Textarea</label><span class="required-asterisk" style="display: none;"> *</span>' +
                                '<textarea id="' + newid + '"  class="form-control" name="my-textarea"></textarea>' +
                                '</div>' +
                                '<div class="event-btn-right"><button class="event-btn file-edit" onclick="EditHtml(\'' + draggableId + '\',\'' + newid + '\')"><i class="fas fa-edit"></i></button>' +
                                '<button class="event-btn file-remove" onclick="RemoveControl(this)"><i class="fa fa-minus-circle" aria-hidden="true"></i></button></div></div>' +
                                '</div>';
                            $(this).find("li").replaceWith(str);
                            break;
                           
                            
                    }

                                                        
                    //$(".frmbtn").resizable();
                    //$("#droppable").sortable('disable');
                   
                },
                stop: function (event, ui) {
                    $('input,textarea').on('input', function (e) {
                        $(this).val('');
                    });
                    //$('input[type="checkbox"],input[type="radio"]').click(function (event) {
                    //    var $checkbox = $(this);

                    //    // Ensures this code runs AFTER the browser handles click however it wants.
                    //    setTimeout(function () {
                    //        $checkbox.removeAttr('checked');
                    //    }, 0);

                    //    event.preventDefault();
                    //    event.stopPropagation();
                    //});
                }
               
});
        });
        function EditHtml(type, ID) {
            var str = '';
            $(".modal-body").html("");
            switch (type) {
                case "label":
                    str = '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).html() + '"/>' +
                        '</div>';
                    if ($("#" + ID).closest(".dragresize").hasClass("col-md-4")) {
                        str += `<div class="modal-row">
    <label class="control-label"> Input Size </label>
    <div class="form-group">
    <select class="form-control"  id="inputsize">
    <option value="col-md-4" selected>Small</option>
    <option value="col-md-6">Medium</option>
    <option value="col-md-12" selected>Large</option>
    </select></div></div>
    `;
                    } else if ($("#" + ID).closest(".dragresize").hasClass("col-md-6")) {
                        str += `<div class="modal-row">
    <label class="control-label"> Input Size </label>
    <div class="form-group">
    <select class="form-control"  id="inputsize">
    <option value="col-md-4">Small</option>
    <option value="col-md-6" selected>Medium</option>
    <option value="col-md-12">Large</option>
    </select></div></div>
    `;
                    }
                    else if ($("#" + ID).closest(".dragresize").hasClass("col-md-12")) {
                        str += `<div class="modal-row">
    <label class="control-label"> Input Size </label>
    <div class="form-group">
    <select class="form-control"  id="inputsize">
    <option value="col-md-4">Small</option>
    <option value="col-md-6">Medium</option>
    <option value="col-md-12" selected>Large</option>
    </select></div></div>
    `;
                    } else {
                    str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    }


                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#" + ID).html($(".lbltext").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "button":
                    str = '<div class="modal-row">' +
                        '<label>Button Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).html() + '"/>' +
                        '</div>';
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).html($(".lbltext").val());
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "checkbox-group":
                    str = '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).find(".checkbox-group").html() + '"/>' +
                        '</div>';
                        
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    str+='<div class="modal-row">' +
                        '<label>Options</label>';
                    $('.dragresize  #' + ID + " [type=checkbox]").each(function () {
                        str += '<div class="option-block">' +
                            '<div class="option-fields">' +
                            ' <input type="text" placeholder="Key" class="form-control"  value="' + $(this).next().text() + '"/>' +
                            ' <input type="text" placeholder="Value" class="form-control"  value="' + $(this).attr("value") + '"/>' +
                            '</div>' +
                            '<div class="popup-event-btn">' +
                            '<button class="event-btn file-edit" onclick="addoption(this)"><i class="fas fa-plus"></i></button>' +
                            '<button class="event-btn file-remove" onclick="RemoveOption(this)"> <i class="fa fa-minus-circle" aria-hidden="true"></i></button > ' +
                            '</div></div>'
                    });
                    str += '</div > ';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {

                        var ID = $(".lbltext").attr("control-id");
                        $(".dragresize  [id=" + ID + "]").html("");
                        $(".dragresize  [id=" + ID + "]").html("<label class='checkbox-group'>Checkbox(Multiple)</label><br/>");
                        $(".option-block").each(function (index,item) {
                            var option_data = `<div class="custom-control custom-checkbox  d-inline-block mr-2">
    <input  type="checkbox" class="custom-control-input" id="${ID + index}"  name="radio" value="${$(this).find("[placeholder = Value]").val()}">
    <label class="custom-control-label" for="${ID + index}">${$(this).find("[placeholder = Key]").val()}</label></div>
    `;                      
                            $(option_data).appendTo(".dragresize  [id=" + ID + "]");
                        });

                        $("#" + ID).find(".checkbox-group").html($(".lbltext").val());
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "date":
                    str = '<div class="modal-row"><div class="form-group set-align"><label for="required-input">Required</label><input type="checkbox" id="required-input"></div></div>';
                    str += '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).prev().prev().html() + '"/>' +
                        '</div>';
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).prev().prev().html($(".lbltext").val());
                        if ($("#required-input").prop("checked")) {
                            $("#" + ID).prev().css("display", "inline");
                        } else {
                            $("#" + ID).prev().css("display", "none");
                        }
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "file":
                    str = '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).prev().html() + '"/>' +
                        '</div>';
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).prev().html($(".lbltext").val());
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "number":
                    str = '<div class="modal-row"><div class="form-group set-align"><label for="required-input">Required</label><input type="checkbox" id="required-input"></div></div>';
                    str += '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).prev().prev().html() + '"/>' +
                        '</div>';
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).prev().prev().html($(".lbltext").val());
                        if ($("#required-input").prop("checked")) {
                            $("#" + ID).prev().css("display", "inline");
                        } else {
                            $("#" + ID).prev().css("display", "none");
                        }
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "radio-group":
                    str = '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).find(".radiobox-group").html() + '"/>' +
                        '</div>';
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    str+='<div class="modal-row">' +
                        '<label>Options</label>';
                    $('.dragresize  #' + ID + " [type=radio]").each(function (index, item) {
                        str += '<div class="option-block">' +
                            '<div class="option-fields">' +
                            ' <input type="text" placeholder="Key" class="form-control"  value="' + $(this).next().text() + '"/>' +
                            ' <input type="text" placeholder="Value" class="form-control"  value="' + $(this).attr("value") + '"/>' +
                            '</div>' +
                            '<div class="popup-event-btn">' +
                            '<button class="event-btn file-edit" onclick="addoption(this)"><i class="fas fa-plus"></i></button>' +
                            '<button class="event-btn file-remove" onclick="RemoveOption(this)"> <i class="fa fa-minus-circle" aria-hidden="true"></i></button > ' +
                            '</div></div>'
                    });
                    str += '</div > ';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {

                        var ID = $(".lbltext").attr("control-id");

                        $(".dragresize  [id=" + ID + "]").html("");
                        $(".dragresize  [id=" + ID + "]").html("<label class='radiobox-group'>Radio</label><br/>");
                        $(".option-block").each(function (index, item) {
                            var option_data = `<div class="custom-control custom-radio d-inline-block mr-2">
    <input  type="radio" class="custom-control-input" id="${ID + index}"  name="radio" value="${$(this).find("[placeholder = Value]").val()}">
    <label class="custom-control-label" for="${ID + index}">${$(this).find("[placeholder = Key]").val()}</label></div>
    `;                          
                            $(option_data).appendTo(".dragresize  [id=" + ID + "]");
                        });
                        $("#" + ID).find(".radiobox-group").html($(".lbltext").val());
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "select":
                    str = '<div class="modal-row"><div class="form-group set-align"><label for="required-input">Required</label><input type="checkbox" id="required-input"></div></div>';
                    str += '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).prev().prev().html() + '"/>' +
                        '</div>';                 
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    str+='<div class="modal-row">' +
                        '<label>Options</label>';

                    $('#' + ID).find('option').each(function () {
                        if ($(this).val() == 0) return;
                        str += '<div class="option-block">' +
                            '<div class="option-fields">' +
                            ' <input type="text" placeholder="Key" class="form-control"  value="' + $(this).text() + '"/>' +
                            ' <input type="text" placeholder="Value" class="form-control"  value="' + $(this).val() + '"/>' +
                            '</div>' +
                            '<div class="popup-event-btn">' +
                            '<button class="event-btn file-edit" onclick="addoption(this)"><i class="fas fa-plus"></i></button>' +
                            '<button class="event-btn file-remove" onclick="RemoveOption(this)"> <i class="fa fa-minus-circle" aria-hidden="true"></i></button > ' +
                            '</div></div>'
                    });
                    str += '</div > ';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).prev().prev().html($(".lbltext").val());
                        $("#" + ID).html("");
                        $(".option-block").each(function (index) {
                            var option_data = "<option value=" + $(this).find("[placeholder=Value]").val() + ">" + $(this).find("[placeholder=Key]").val() + "</option>";
                            $(option_data).appendTo('#' + ID);
                        });
                        if ($("#required-input").prop("checked")) {
                            $("#" + ID).prev().css("display", "inline");
                        } else {
                            $("#" + ID).prev().css("display", "none");
                        }
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "text":
                    str = '<div class="modal-row"><div class="form-group set-align"><label for="required-input">Required</label><input type="checkbox" id="required-input"></div></div>';
                    str += '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).prev().prev().html() + '"/>' +
                        '</div>';
                    str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).prev().prev().html($(".lbltext").val());
                        if ($("#required-input").prop("checked")) {
                            $("#" + ID).prev().css("display", "inline");
                        } else {
                            $("#" + ID).prev().css("display", "none");
                        }
                        //$("#" + ID).addClass($("#inputsize").val());
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;
                case "textarea":
                    str = '<div class="modal-row"><div class="form-group set-align"><label for="required-input">Required</label><input type="checkbox" id="required-input"></div></div>';

                    str += '<div class="modal-row">' +
                        '<label>Label Text</label>' +
                        '<input  type="text" control-id="' + ID + '" class="form-control lbltext" value="' + $("#" + ID).prev().prev().html() + '"/>' +
                        '</div>';
                     str += '<div class="modal-row">' +
                        '<label class="control-label"> Input Size </label>' +
                        '<div class="form-group">' +
                        '<select class="form-control"  id="inputsize">' +
                        '<option value="col-md-4">Small</option>' +
                        '<option value="col-md-6">Medium</option>' +
                        '<option value="col-md-12" selected>Large</option>' +
                        '</select></div></div>';
                    $("#btnSave").unbind();
                    $("#btnSave").bind("click", function () {
                        var ID = $(".lbltext").attr("control-id");
                        $("#" + ID).prev().prev().html($(".lbltext").val());
                        if ($("#required-input").prop("checked")) {
                            $("#" + ID).prev().css("display", "inline");
                        } else {
                            $("#" + ID).prev().css("display", "none");
                        }
                        $("#" + ID).closest(".dragresize").removeClass("col-md-4 col-md-6 col-md-12").addClass($("#inputsize").val());
                        $("#exampleModalCenter").modal("hide");
                    });
                    break;

            }
            $(".modal-body").html(str);
            $("#exampleModalCenter").modal("show");
        }
        function RemoveOption(obj) {

            obj.closest(".option-block").remove();
        };
        function RemoveControl(obj) {
            obj.closest(".dragresize").remove();
        }
        function addoption(obj) {
            var str = '<div class="option-block">' +
                '<div class="option-fields">' +
                ' <input type="text" placeholder="Key" class="form-control"/>' +
                ' <input type="text" placeholder="Value" class="form-control"/>' +
                '</div>' +
                '<div class="popup-event-btn">' +
                '<button class="event-btn file-edit" onclick="addoption(this)"><i class="fas fa-plus"></i></button>' +
                '<button class="event-btn file-remove" onclick="RemoveOption(this)"> <i class="fa fa-minus-circle" aria-hidden="true"></i></button > ' +
                '</div></div>';

            obj.closest(".option-block").after(parseHTML(str));
        }
        function parseHTML(htmlstr) {
            var t = document.createElement('template');
            t.innerHTML = htmlstr;
            return t.content.cloneNode(true);
        }
        function saveHtml() {
            var gethtml = $("#droppable").html();

            $.ajax({
                type: "POST",
                url: '/CarePlan/SaveFormTemplate',
                data: JSON.stringify({ htmlTemplate: gethtml }),
                contentType: 'application/json; charset=UTF-8',
                dataType: "json",
                success: function (result) {

                }
            });
        }
    </script>
}


